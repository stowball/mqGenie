/*
* mqGenie v0.2.0
*
* Adjusts CSS media queries in browsers that include the scrollbar's width in the viewport width so they fire at the intended size
*
* Returns the mqGenie object containing .adjusted, .width & fontSize for use in re-calculating media queries in JavaScript with mqAdjust(string)
*
* Copyright (c) 2013 Matt Stow
*
* http://mattstow.com
*
* Licensed under the MIT license
*/
;var cssjs=function(){function e(e,t){var n=e.cssRules?e.cssRules:e.media,r,i=[],s=0,o=n.length;for(s;s<o;s++){r=n[s];if(t(r))i.push(r)}return i}function t(t){return e(t,function(t){return t.constructor===CSSStyleRule&&$(t.selectorText).length===0})}function n(t){return e(t,function(e){return e.constructor===CSSMediaRule})}function r(e){var t=window.location,n=document.createElement("a");n.href=e;return n.hostname===t.hostname&&n.port===t.port&&n.protocol===t.protocol}function i(e){return e.ownerNode.constructor===HTMLStyleElement}function s(e){return e.href&&r(e.href)}function o(){var e=document.styleSheets,t,n=e.length,r=0,o=[];for(r;r<n;r++){t=e[r];if(s(t)||i(t))o.push(t)}return o}return{sameOrigin:r,getStylesheets:o,getUnusedRules:t,getMediaQueries:n}}();var mqGenie=function(){var e=document.documentElement;if(window.getComputedStyle&&window.getComputedStyle(e).getPropertyValue("overflow-y")!="scroll")e.style.overflowY="scroll";var t=window.innerWidth-e.clientWidth,n={adjusted:!("WebkitAppearance"in e.style)&&t>0,width:t,fontSize:16};if(n.adjusted){var r,i;if(window.getComputedStyle)n.fontSize=parseFloat(window.getComputedStyle(e).getPropertyValue("font-size"));var s=cssjs.getStylesheets(),o=0;for(o;o<s.length;o++){r=cssjs.getMediaQueries(s[o]);for(var u=0;u<r.length;u++){i=r[u].media.mediaText.replace(/\d.+?px/gi,function(e){return parseInt(e,10)+n.width+"px"});i=i.replace(/\d.+?em/gi,function(e){return(parseFloat(e)*n.fontSize+n.width)/n.fontSize+"em"});r[u].media.mediaText=i}}}return n}();var mqAdjust=function(e){if(!mqGenie.adjusted)return e;var t=e.replace(/\d.+?px/gi,function(e){return parseInt(e,10)+mqGenie.width+"px"});t=t.replace(/\d.+?em/gi,function(e){return(parseFloat(e)*mqGenie.fontSize+mqGenie.width)/mqGenie.fontSize+"em"});return t};